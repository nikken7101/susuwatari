# Audio element

Custom element wrapper for pcm audio streams. Provides basic connection interface and helper functions. Useful to create html views for audio streams.


## Recipe

**I&thinsp;N&thinsp;G&thinsp;R&thinsp;E&thinsp;D&thinsp;I&thinsp;E&thinsp;N&thinsp;T&thinsp;S**

* [ ] [audio-element](https://npmjs.org/package/audio-element/)
* [ ] [browserify](https://github.com/substack/node-browserify)
* [ ] [document-register-element](https://github.com/WebReflection/document-register-element)

**D&thinsp;I&thinsp;R&thinsp;E&thinsp;C&thinsp;T&thinsp;I&thinsp;O&thinsp;N&thinsp;S**

1.&nbsp;Install _audio-element_

[![npm install audio-element](https://nodei.co/npm/audio-element.png?mini=true)](https://npmjs.org/package/audio-element/)

2.&nbsp;Extend _audio-element_

`my-element.js`:

```js
var AudioElement = require('audio-element');
var Generator = require('audio-generator');


var MyElementPrototype = Object.create(AudioElement.prototype);

MyElementPrototype.createdCallback = function () {
	//set some pcm stream as `stream` property
	this.stream = Generator({duration: 2});

	//your code...

	AudioElement.prototype.createdCallback.call(this);
};
MyElementPrototype.attachedCallback = function () {};
MyElementPrototype.detachedCallback = function () {};
MyElementPrototype.attributeChangedCallback = function (attr, oldVal, newVal) {
	//your code...

	AudioElement.prototype.attributeChangedCallback.call(this);
};

//connection logic
MyElementPrototype.numberOfInputs = 0;
MyElementPrototype.numberOfOutputs = 1;

//meta stuff — used by audio-lab
MyElementPrototype.thumbnail = '☯';
MyElementPrototype.label = 'Magic';
MyElementPrototype.description = 'Just try and you will see';


module.exports = document.registerElement('my-element', { prototype: MyElementPrototype });
```

3.&nbsp;Use as _import link_

```sh
$ browserify my-element.js -o ./dist/my-element.js
```

`my-element.html`:

```html
<!-- <link rel="stylesheet" type="text/css" href="./dist/my-element.css"/> -->
<script src="./dist/my-element.js"></script>
```

`main.html`:

```html
<link rel="import" href="./my-element.html">
<link rel="import" href="./node_modules/audio_speaker">

<my-element connect="#speaker"></my-element>
<audio-speaker id="speaker"></audio-speaker>
```

4.&nbsp;Use within bundle

`app.js`:

```js
var MyElement = require('./my-element');
var SpeakerElement = require('audio-speaker/element');

var myElement = document.createElement('my-element');
var speakerElement = document.createElement('audio-speaker');

myElement.connect(speakerElement);
myElement.emit('ready');

document.body.appendChild(myElement);
document.body.appendChild(speakerElement);

//disconnect after a second
setTimeout(function () {
	myElement.disconnect();
}, 1000);
```

```sh
$ browserify app.js -o bundle.js
```

5.&nbsp;Season with polyfills, if needed

```html
<script src="//cdnjs.cloudflare.com/ajax/libs/document-register-element/0.5.0/document-register-element.js"></script>
<script src="https://cdn.polyfill.io/v1/polyfill.js?features=default,WeakMap,WeakSet,Node.prototype.contains"></script>
```


## Elements using audio-element

> [audio-gain](https://github.com/audio-lab/gain) — volume controller.<br/>
> [audio-speaker](https://github.com/audio-lab/speaker) — audio speaker output<br/>
> [audio-biquad](https://github.com/audio-lab/biquad) — biquad filter, same as BiquadFilterNode in web-audio-api, but for streams.<br/>
> [audio-generator](https://github.com/audio-lab/generator) — generator readable stream based on function.<br/>


## Related

> [audio-lab](https://github.com/audio-lab/lab) — audio playground, sound graph constructor for basic audio elements.</br>
> [document-register-element](https://github.com/WebReflection/document-register-element) — polyfill for `document.registerElement`.</br>
> [element-boilerplate](https://github.com/webcomponents/element-boilerplate) — boilerplate for custom element.</br>